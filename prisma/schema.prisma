// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Course {
  code        Int     @id
  description String
  year        Int
  type        String
  duration    Int
  url         String
  language    String
  school      String
  urlTime     String?

  lectures Lecture[]

  @@unique([code, year])
}

model Lecture {
  id          Int      @id @default(autoincrement())
  code        String   @unique
  year        Int
  curricula   String
  lastUpdated DateTime @default(now())

  courses    Course     @relation(fields: [courseCode], references: [code])
  courseCode Int
  events     Event[]
  calendars  Calendar[]
}

model Event {
  id    Int      @id @default(autoincrement())
  title String
  start DateTime
  end   DateTime
  aula  String

  lecture   Lecture @relation(fields: [lectureId], references: [id])
  lectureId Int
}

model Calendar {
  slug    String    @id @default(cuid())
  lecture Lecture[]
}
